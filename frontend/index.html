<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</title>
    <!-- CSS ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡∏£‡∏ß‡∏°‡πÑ‡∏ß‡πâ‡πÉ‡∏ô <style> block ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß -->
    <style>
        /* ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏≠‡∏ô‡∏ï‡πå Sarabun ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ */
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap');
        
        body {
            font-family: 'Sarabun', 'Arial', sans-serif;
            padding: 0;
            margin: 0;
            background-color: #f0f4f7; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏≠‡πà‡∏≠‡∏ô ‡πÜ */
            color: #333;
            line-height: 1.6;
        }

        h1, h2, h3 {
            color: #007bff; /* ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∞‡πÄ‡∏• */
        }

        /* ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß (Hero Section) - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
        .hero-section {
            /* ‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ) */
            background-image: url('beach_bg.jpg');
            
            /* ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û */
            background-size: cover;      /* ‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà */
            background-position: center; /* ‡πÉ‡∏´‡πâ‡∏à‡∏∏‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏™‡∏°‡∏≠ */
            background-repeat: no-repeat;
            
            color: white;
            text-align: center;
            padding: 100px 20px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏ä‡∏±‡∏î‡∏Ç‡∏∂‡πâ‡∏ô */
            position: relative;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        }


        .overlay {
            background-color: rgba(0, 0, 0, 0.2); /* ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ */
            padding: 30px;
            border-radius: 10px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .hero-section h1 {
            font-size: 3em;
            margin-bottom: 10px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .total-savings-hero {
            /* ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏£‡∏≠‡∏ö‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° */
            background-color: rgba(255, 255, 255, 0.95);
            padding: 20px 40px;
            border-radius: 12px;
            display: inline-block;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
        }

        .total-savings-hero h2 {
            font-size: 3.5em; /* ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏•‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏î‡∏µ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            margin-top: 0;
            margin-bottom: 0;
            color: #ffc107; /* ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏ó‡∏£‡∏≤‡∏¢ */
            font-weight: bold;
        }

        /* ‡∏Å‡∏£‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Section ‡∏ï‡πà‡∏≤‡∏á‡πÜ */
        section {
            padding: 40px 5%;
            margin-top: 30px;
            margin-bottom: 30px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        
        h2 {
            font-size: 1.8rem;
            color: #17a2b8; /* ‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏• */
            text-align: center;
            margin-top: 0;
            margin-bottom: 30px;
        }

        /* Dashboard Cards */
        .dashboard-cards {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 20px;
        }

        .card {
            border: none;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            flex: 1 1 200px;
            background-color: #e6f7ff; /* ‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡∏≠‡πà‡∏≠‡∏ô */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
        .card h3 {
            color: #0056b3;
            font-size: 1.5em;
        }
        .amount {
            font-size: 1.8em;
            font-weight: bold;
            color: #007bff;
        }

        /* Deposit Form */
        .deposit-form-container {
            background-color: #fff;
            padding: 30px;
            border: 1px solid #dee2e6;
            border-radius: 10px;
        }
        
        form label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
            color: #0056b3;
        }
        
        #savingForm input[type="date"],
        #savingForm input[type="number"],
        #savingForm select,
        #savingForm input[type="file"] {
            width: 100%;
            padding: 12px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 1rem;
        }
        
        .qr-code-box {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            border: 2px dashed #17a2b8; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡πÄ‡∏™‡πâ‡∏ô‡∏õ‡∏£‡∏∞ */
            border-radius: 10px;
            background-color: #f8ffff;
            color: #17a2b8;
        }

        #submitBtn {
            background-color: #007bff;
            color: white;
            padding: 15px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            margin-top: 25px;
            width: 100%;
            transition: background-color 0.3s;
            box-shadow: 0 4px #0056b3;
        }
        #submitBtn:hover {
            background-color: #0056b3;
            box-shadow: 0 2px #003f8a;
            transform: translateY(2px);
        }

        /* History Table */
        .table-container {
            overflow-x: auto;
        }
        table {
            border-collapse: collapse;
            margin: 25px 0;
            font-size: 0.9em;
            min-width: 400px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            width: 100%; /* ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö responsive */
        }
        table thead tr {
            background-color: #007bff; /* ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°‡∏ï‡∏≤‡∏°‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÉ‡∏´‡∏°‡πà */
            color: #ffffff;
            text-align: center;
        }
        table th,
        table td {
            padding: 12px 15px;
            text-align: center;
        }
        table tbody tr {
            border-bottom: 1px solid #dddddd;
        }
        table tbody tr:nth-of-type(even) {
            background-color: #f7f7f7; /* ‡∏™‡∏µ‡∏™‡∏•‡∏±‡∏ö‡πÅ‡∏ñ‡∏ß */
        }
        table tbody tr:last-of-type {
            border-bottom: 2px solid #007bff;
        }

        .view-slip-btn {
            background-color: #28a745; /* ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß */
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .view-slip-btn:hover {
            background-color: #218838;
        }
        .export-section {
            text-align: center;
            margin-top: 20px;
        }
        #exportCsvBtn {
            background-color: #ffc107; /* ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á */
            color: #333;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
            font-weight: bold;
        }
        #exportCsvBtn:hover {
            background-color: #e0a800;
        }

        /* Message Box (Functional styles kept) */
        .message-box {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
            display: none;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* Modal for Slip View (Functional styles kept) */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
        }
        .modal-content {
            margin: 10% auto;
            padding: 20px;
            width: 80%;
            max-width: 500px;
            background-color: #fefefe;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            position: relative;
            text-align: center;
        }
        .modal-content img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 10px auto;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-btn:hover,
        .close-btn:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 20px;
            background-color: #343a40; /* ‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°‡∏ï‡∏≤‡∏°‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÉ‡∏´‡∏°‡πà */
            color: #adb5bd;
            margin-top: 40px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-section h1 {
                font-size: 2.5em;
            }
            .total-savings-hero h2 {
                font-size: 2.5em;
            }
            .dashboard-cards {
                flex-direction: column;
            }
            .card {
                flex: 1 1 100%;
            }
        }
    </style>
</head>
<body>

    <header class="hero-section">
        <div class="overlay">
            <h1>üåä **Saving Tides** | ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏≤</h1>
            <p>‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏û‡∏ß‡∏Å‡πÄ‡∏£‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏≠‡∏≠‡∏°</p>
            <div class="total-savings-hero">
                <h2 id="totalAmount">0.00 ‡∏ö‡∏≤‡∏ó</h2>
            </div>
        </div>
    </header>

    <section class="dashboard-section">
        <h2>üê≥ ‡∏¢‡∏≠‡∏î‡∏≠‡∏≠‡∏°‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</h2>
        <div class="dashboard-cards">
            <div class="card user-card">
                <h3>‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô</h3>
                <p id="amount‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô" class="amount">0.00 ‡∏ö‡∏≤‡∏ó</p>
            </div>
            <div class="card user-card">
                <h3>‡πÄ‡∏ö‡∏ô‡∏ã‡πå</h3>
                <p id="amount‡πÄ‡∏ö‡∏ô‡∏ã‡πå" class="amount">0.00 ‡∏ö‡∏≤‡∏ó</p>
            </div>
            <div class="card user-card">
                <h3>‡πÅ‡∏û‡∏£</h3>
                <p id="amount‡πÅ‡∏û‡∏£" class="amount">0.00 ‡∏ö‡∏≤‡∏ó</p>
            </div>
            <div class="card user-card">
                <h3>‡∏°‡∏¥‡πâ‡∏ß</h3>
                <p id="amount‡∏°‡∏¥‡πâ‡∏ß" class="amount">0.00 ‡∏ö‡∏≤‡∏ó</p>
            </div>
        </div>
    </section>

    <section class="deposit-section">
        <h2>üèùÔ∏è ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÉ‡∏´‡∏°‡πà</h2>
        <div class="deposit-form-container">
            <form id="savingForm" enctype="multipart/form-data">
                
                <label for="depositorName">1. ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏≠‡∏≠‡∏°:</label>
                <select id="depositorName" name="depositorName" required>
                    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ --</option>
                    <option value="‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô">‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô</option>
                    <option value="‡πÄ‡∏ö‡∏ô‡∏ã‡πå">‡πÄ‡∏ö‡∏ô‡∏ã‡πå</option>
                    <option value="‡πÅ‡∏û‡∏£">‡πÅ‡∏û‡∏£</option>
                    <option value="‡∏°‡∏¥‡πâ‡∏ß">‡∏°‡∏¥‡πâ‡∏ß</option>
                </select>

                <label for="depositDate">2. ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏°:</label>
                <input type="date" id="depositDate" name="depositDate" required>

                <label for="depositAmount">3. ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó):</label>
                <input type="number" id="depositAmount" name="depositAmount" min="1" step="0.01" required>

                <h3>4. ‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</h3>
            <div class="qr-code-box">
                <!-- ‡πÉ‡∏ä‡πâ Placeholder ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡∏ó‡∏∞‡πÄ‡∏• -->
                <img src="https://placehold.co/200x200/17a2b8/FFFFFF?text=QR+Code" alt="QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" style="width: 200px; height: auto; display: block; margin: 0 auto;">
                
                <p style="margin-top: 10px;">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£: XXXXXX | ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</p>
            </div>

                <label for="slipUpload">5. ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ (‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô):</label>
                <input type="file" id="slipUpload" name="slipUpload" accept="image/*" required>

                <button type="submit" id="submitBtn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</button>
                <div id="message" class="message-box"></div>
            </form>
        </div>
    </section>

    <section class="history-section">
        <h2>üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
        <div class="table-container">
            <table width="100%">
                <thead>
                    <tr>
                        <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</th>
                        <th>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏≠‡∏≠‡∏°</th>
                        <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th>
                        <th>‡∏î‡∏π‡∏™‡∏•‡∏¥‡∏õ</th>
                    </tr>
                </thead>
                <tbody id="transactionTableBody">
                    <!-- Data will be inserted here by JavaScript -->
                </tbody>
            </table>
        </div>
        
        <div class="export-section">
            <button id="exportCsvBtn">‚¨áÔ∏è ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô Excel (CSV)</button>
        </div>
    </section>
    
    <footer>
        <p>&copy; 2025 Group Savings Project</p>
    </footer>

    <!-- Modal Structure for Viewing Slip -->
    <div id="slipModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="document.getElementById('slipModal').style.display='none'">&times;</span>
            <h3>‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</h3>
            <img id="modalSlipImage" src="" alt="‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">
            <p style="font-size: 0.8rem; color: #666; margin-top: 5px;">* ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏•‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏ö‡∏ô Server</p>
        </div>
    </div>


    <script>
        // ** 1. ‡∏Å‡∏≥‡∏´‡∏ô‡∏î URL ‡∏Ç‡∏≠‡∏á Server Backend ‡∏ó‡∏µ‡πà Deploy ‡∏ö‡∏ô Railway **
        const BACKEND_URL = 'https://disciplined-adventure-production-3f49.up.railway.app';
        
        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°
        const MEMBERS = ["‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô", "‡πÄ‡∏ö‡∏ô‡∏ã‡πå", "‡πÅ‡∏û‡∏£", "‡∏°‡∏¥‡πâ‡∏ß"];

        const savingForm = document.getElementById('savingForm');
        const transactionTableBody = document.getElementById('transactionTableBody');
        const totalAmountElement = document.getElementById('totalAmount');
        const messageBox = document.getElementById('message');
        const submitBtn = document.getElementById('submitBtn');
        const exportCsvBtn = document.getElementById('exportCsvBtn');
        const slipModal = document.getElementById('slipModal');
        const modalSlipImage = document.getElementById('modalSlipImage');

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (‡πÅ‡∏ó‡∏ô alert)
        function showMessage(msg, type = 'success') {
            messageBox.textContent = msg;
            messageBox.className = `message-box ${type}`;
            messageBox.style.display = 'block';
            setTimeout(() => {
                messageBox.style.display = 'none';
            }, 5000);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ü‡∏≠‡∏£‡πå‡πÅ‡∏°‡∏ï‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡∏ö‡∏≤‡∏ó
        function formatCurrency(amount) {
            return parseFloat(amount).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ' ‡∏ö‡∏≤‡∏ó';
        }

        // -------------------------------------------------------------------
        // 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ (Fetch Data)
        // -------------------------------------------------------------------

        async function fetchSavingsData() {
            try {
                // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å Backend
                const response = await fetch(`${BACKEND_URL}/api/savings`);
                if (!response.ok) {
                    throw new Error('Failed to fetch data from server.');
                }
                const data = await response.json();
                
                // 2.1 ‡πÅ‡∏™‡∏î‡∏á‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                const totalSavings = data.transactions.reduce((sum, t) => sum + t.amount, 0);
                totalAmountElement.textContent = formatCurrency(totalSavings);

                // 2.2 ‡πÅ‡∏™‡∏î‡∏á‡∏¢‡∏≠‡∏î‡∏≠‡∏≠‡∏°‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•
                const memberTotals = MEMBERS.reduce((acc, member) => {
                    acc[member] = 0;
                    return acc;
                }, {});

                data.transactions.forEach(t => {
                    if (memberTotals.hasOwnProperty(t.depositorName)) {
                        memberTotals[t.depositorName] += t.amount;
                    }
                });

                MEMBERS.forEach(member => {
                    const el = document.getElementById(`amount${member}`);
                    if (el) {
                        el.textContent = formatCurrency(memberTotals[member]);
                    }
                });

                // 2.3 ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°
                displayTransactionHistory(data.transactions);

            } catch (error) {
                console.error('Error fetching savings data:', error);
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° error ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡πá‡∏ô
                showMessage('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Backend Server ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà', 'error');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        function displayTransactionHistory(transactions) {
            transactionTableBody.innerHTML = ''; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤
            
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡πÄ‡∏Å‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (createdAt)
            const sortedTransactions = transactions.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

            sortedTransactions.forEach(t => {
                const row = transactionTableBody.insertRow();
                
                // ‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
                const formattedDate = new Date(t.createdAt).toLocaleDateString('th-TH', {
                    day: '2-digit', month: 'short', year: 'numeric'
                });

                row.insertCell().textContent = formattedDate;
                row.insertCell().textContent = t.depositorName;
                row.insertCell().textContent = formatCurrency(t.amount).replace(' ‡∏ö‡∏≤‡∏ó', ''); // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
                
                const slipCell = row.insertCell();
                const viewBtn = document.createElement('button');
                viewBtn.textContent = '‡∏î‡∏π‡∏™‡∏•‡∏¥‡∏õ';
                viewBtn.className = 'view-slip-btn';
                // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Modal ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å ‡πÇ‡∏î‡∏¢‡∏™‡πà‡∏á slipUrl ‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢
                viewBtn.onclick = () => showSlipModal(t.slipUrl);
                slipCell.appendChild(viewBtn);
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á Modal ‡∏î‡∏π‡∏™‡∏•‡∏¥‡∏õ
        function showSlipModal(slipUrl) {
            // ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏•‡∏¥‡∏õ‡∏à‡∏≤‡∏Å Backend URL + slip path
            modalSlipImage.src = `${BACKEND_URL}${slipUrl}`;
            slipModal.style.display = 'block';
        }

        // -------------------------------------------------------------------
        // 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÉ‡∏´‡∏°‡πà (Submit Form)
        // -------------------------------------------------------------------

        savingForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            
            const formData = new FormData(savingForm);
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á
            const amount = parseFloat(formData.get('depositAmount'));
            if (isNaN(amount) || amount <= 0) {
                showMessage('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏õ‡πâ‡∏≠‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0)', 'error');
                return;
            }

            submitBtn.disabled = true;
            submitBtn.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...';
            
            try {
                // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏•‡∏¥‡∏õ) ‡πÑ‡∏õ‡∏¢‡∏±‡∏á API
                const response = await fetch(`${BACKEND_URL}/api/savings/deposit`, {
                    method: 'POST',
                    body: formData // FormData ‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Content-Type: multipart/form-data ‡πÄ‡∏≠‡∏á
                });
                
                if (response.status === 400) {
                    const errorData = await response.json();
                    throw new Error(errorData.message || '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏•‡∏¥‡∏õ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤');
                }
                
                if (!response.ok) {
                    throw new Error('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
                }
                
                showMessage('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
                savingForm.reset(); // ‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
                fetchSavingsData(); // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
                
            } catch (error) {
                console.error('Error submitting form:', error);
                showMessage('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + error.message, 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°';
            }
        });

        // -------------------------------------------------------------------
        // 4. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô CSV
        // -------------------------------------------------------------------

        exportCsvBtn.addEventListener('click', async () => {
            try {
                const response = await fetch(`${BACKEND_URL}/api/savings/export`);
                if (!response.ok) {
                    throw new Error('Failed to export data.');
                }

                // ‡∏Å‡∏≤‡∏£‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå CSV
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.style.display = 'none';
                a.href = url;
                a.download = 'saving_history.csv';
                document.body.appendChild(a);
                a.click();
                window.URL.revokeObjectURL(url);
                
                showMessage('‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå CSV ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
                
            } catch (error) {
                console.error('Error exporting CSV:', error);
                showMessage('‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å CSV ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + error.message, 'error');
            }
        });


        // -------------------------------------------------------------------
        // 5. Initial Load
        // -------------------------------------------------------------------

        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        document.addEventListener('DOMContentLoaded', () => {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('depositDate').value = today;
            fetchSavingsData();
        });

        // ‡∏õ‡∏¥‡∏î modal ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å
        window.onclick = function(event) {
            if (event.target == slipModal) {
                slipModal.style.display = "none";
            }
        }

    </script>
</body>
</html>